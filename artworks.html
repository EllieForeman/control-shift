<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <div id="head"></div>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro&display=swap" rel="stylesheet">
    <!--  Stylesheet -->
    <link rel="stylesheet" type="text/css" href="styles/style.css">
    <link rel="stylesheet" type="text/css" href="styles/artworks.css">

</head>

<body>
    <div id="navbar"></div>
    <!--  Grid of artworks generated from json file - see js below -->
    <div class="pb-3 container home-page-content pt-4">
        <h1>Artworks</h1>
        <!--  Test filtering grid -->
        <div class="pt-3">
            <button class="btn btn-default filter-button" data-filter="all">All</button>
            <button class="btn btn-default filter-button" data-filter="workshop">Workshops</button>
            <button class="btn btn-default filter-button" data-filter="installation">Installation</button>
            <button class="btn btn-default filter-button" data-filter="online">Online</button>
        </div>

        <div class="padding-bottom" class="container">
            <div id="myData" class="row"></div>
        </div>
    </div>
    <!--  Modal --> 
    <div id="infoModal" class="modal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-header-text"></h5>
                    <button class="modal-close-button" data-dismiss="modal" aria-label="Close"> <!--  close modal button animation --> 
                        <div class="close-container">
                            <div class="leftright"></div>
                            <div class="rightleft"></div>
                        </div>
                    </button>
                </div>
                <div class="modal-body container">
                    <h1 class="modal-header-text pb-4"><span class="artwork-title-text modal-header-text pb-4"></span> by <span class="artist-name-text modal-header-text pb-3"></span></h1>
                    <div id="imageContainer" class="pt-2">
                        <img id="modalImage" class="mx-auto d-block pb-3" src="" style="width:70%">
                    </div>
                    <div class="pr-4 pl-4">
                        <h2 class="pt-3 pb-3 artwork-title-text modal-h2-text"></h2>
                        <p class="pb-2 artwork-info-text modal-text"></p>
                        <hr>
                        <h2 class="pt-2 pb-3 modal-h2-text">About <span class="artist-name-text modal-h2-text"></span></h2>
                        <p class="pb-2 artist-bio-text modal-text"></p>
                        <hr>
                    </div>
                </div>
                <!--  Bottom section with when, where, social media sections --> 
                <div class="pb-2 container">
                    <div class="row align-items-center">
                        <div class="col-sm text-center">
                            <p class="modal-text"><small>When?</small></p>
                            <p class="modal-text when-text"></p>
                        </div>
                        <div class="col-sm text-center bottom-bar-modal-info">
                            <p class="modal-text"><small>Where?</small></p>
                            <p class="modal-text where-text"></p>
                        </div>
                        <div id="socialMediaContainer" class="col-sm text-center bottom-bar-modal-info">
                            <p class="modal-text"><small>Social Media</small></p>
                            <div class="container pb-3">
                                <div class="row justify-content-center no-gutters">
                                    <div id="websiteIcon" class="col">
                                        <a id="websiteLink" href="#" target="_blank"><img src="./img/www.svg" alt="www logo" width="25px" class="filter-blue icon-max-width"/></a>
                                    </div>
                                    <div id="instagram" class="col">
                                        <a id="instaLink" href="#" target="_blank"><svg role="img" class="filter-blue icon-max-width" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Instagram icon</title><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"/></svg></a>
                                    </div>
                                    <div id="twitter" class="col">
                                        <a id="twitLink" href="#" target="_blank"><svg role="img" class="filter-blue icon-max-width" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Instagram icon</title><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"/></svg></a>
                                    </div>
                                    <div id="linkedIn" class="col">
                                        <a id="linkedInLink" href="#" target="_blank"><svg role="img" class="filter-blue icon-max-width" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn icon</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--  End of bottom section with when, where, social media --> 
            </div>
        </div>
    </div>
    <!-- Include Footer -->
    <div id="footer"></div>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script>
        $('#navbar').load('./components/navigation.html');
        $('#head').load('./components/head.html');
        setTimeout(function(){ $('#footer').load('./components/footer.html')}, 200); // stop flash of footer content before rest of the page is loaded
    </script>

    <script>
        fetch('artworks.json') // fetching json code
        .then(function (response) {
            return response.json(); // Takes a Response stream & returns a promise that resolves with the result of parsing the body text as JSON.
        })
        .then(function (data) {
            appendData(data); // If successful, runs appendData function below
        })
        .catch(function (err) {
            console.log('error: ' + err); // catches error & console logs out the error message
        });
        // function to generate grid of artworks from json file
        function appendData(data) {
            let mainContainer = document.getElementById("myData");
            for (let i = 0; i < data.length; i++) {
                //Making artist Container div to hold artist info
                let artistContainer = document.createElement("div");
                artistContainer.setAttribute("class", "col-md-4 artworkImageDiv filter " + data[i].artwork.type); // setting this div to have bootstrap class "col", so each artists container is a responsive bootstrap coloumn
                artistContainer.setAttribute("id", "outerImage"); //setting unique id to artist name
                //setting Artist Name
                let text = document.createElement("div");
                text.innerHTML = data[i].artist.name;
                text.setAttribute("class", "gridText pt-2 text-center");
                //make anchor
                var a = document.createElement('a');
                a.setAttribute("href", "#");
                a.setAttribute("data-id", data[i].id);
                a.setAttribute("data-toggle", "modal");
                a.setAttribute("data-target", "#infoModal");
                a.setAttribute("class", "thumbnail");
                //make div overlay for image - for the coloured filter
                let blueSquare = document.createElement("div");
                blueSquare.setAttribute("class", "blueSquare");
                // setting Image
                let image = document.createElement("IMG"); //creating image element
                image.setAttribute("src", `./img/artists-work/` + data[i].artwork.image.url ); //variable 'src' set to first image in array;
                image.setAttribute("alt", data[i].artwork.image.alt); //variable 'alt' set to matching alt value
                image.setAttribute("class", " mx-auto d-block artworkImage img-fluid");
                //adding new elements to one another & positioning in mainContainer
                a.appendChild(blueSquare);
                blueSquare.appendChild(image);
                artistContainer.appendChild(a); 
                artistContainer.appendChild(text); 
                mainContainer.appendChild(artistContainer);
            }

            // function to populate modal with artist info from json file, based on which thumbnail image is clicked
           (function($) {
                var infoModal = $('#infoModal');
                $('.thumbnail').on('click', function(){
                    let id = $(this).data('id');
                    $.ajax({ 
                        type: "GET", 
                        url: './artworks.json',
                        dataType: 'json',
                        success: function(data){    
                            //injecting the text into elements with class specified
                            infoModal.find('.artist-name-text').text(data[id].artist.name);
                            infoModal.find('.artist-bio-text').text(data[id].artist.bio_100w);
                            infoModal.find('.artwork-title-text').text(data[id].artwork.artwork_name);
                            infoModal.find('.artwork-info-text').text(data[id].artwork.artwork_description_150w_long);
                            infoModal.find('.when-text').text(data[id].artwork.when);
                            infoModal.find('.where-text').text(data[id].artwork.where);
                            infoModal.modal('show');
                            
                            // large image on modal src set 
                            var x = document.getElementById("modalImage");
                            x.getAttributeNode("src").value = `./img/artists-work/` + data[id].artwork.image.url;

                            // SOCIAL MEDIA SECTION
                            // If no social media accounts in json, then hide div
                            let socialAccounts = Object.keys(data[id].social_media).length; //count how many social media accounts artist needs displaying
                            if (socialAccounts === 0) {
                                $( "#socialMediaContainer" ).addClass( "hide" );
                            } else {
                                $( "#socialMediaContainer" ).removeClass( "hide" );
                            }
                            // Show/Hide Website & add personal link
                            if (data[id].social_media["website"]) {  
                            $( "#websiteIcon" ).removeClass( "hide" );
                            var l = document.getElementById('websiteLink');
                            l.getAttributeNode("href").value = data[id].social_media.website;
                            } else {
                                $( "#websiteIcon" ).addClass( "hide" )
                            }
                            // Show/Hide Instagram & add personal link
                            if (data[id].social_media["instagram"]) {  
                                $( "#instagram" ).removeClass( "hide" );
                                var i = document.getElementById('instaLink');
                                i.getAttributeNode("href").value = data[id].social_media.instagram;
                            } else {
                                $( "#instagram" ).addClass( "hide" )
                            }
                            // Show/Hide Twitter & add personal link
                            if (data[id].social_media["twitter"]) {  
                                $( "#twitter" ).removeClass( "hide" );
                                var t = document.getElementById('twitLink');
                                t.getAttributeNode("href").value = data[id].social_media.twitter;
                            } else {
                                $( "#twitter" ).addClass( "hide" )
                            }
                            // Show/Hide LinkedIn & add personal link
                            if (data[id].social_media["linkedIn"]) {  
                                $( "#linkedIn" ).removeClass( "hide" );
                                var l = document.getElementById('linkedInLink');
                                l.getAttributeNode("href").value = data[id].social_media.linkedIn;
                            } else {
                                $( "#linkedIn" ).addClass( "hide" )
                            }
                        }      
                    });
                    return false;
                });
            })(jQuery);  
        }
    </script>
    
    <script>
        // FILTER FUNCTIONALITY
        $(document).ready(function(){
            $(".filter-button").click(function(){
                var value = $(this).attr('data-filter'); // value = the data-filter attribute of button clicked (either all, or type)
                console.log("value", value);
                if(value == "all")
                {
                    $('.filter').show('1000'); //The show() method shows the hidden, selected elements.
                }
                else
                {
                    $(".filter").not('.'+value).hide("slow"); //.not() method removes elements from the matched set
                    $('.filter').filter('.'+value).show("slow"); // Reduce the set of matched elements to those that match the selector 
                }
                console.log("this", $(this))
                if ($(".filter-button").removeClass("active")) {
                $(this).removeClass("active");
                }
                $(this).addClass("active");
            });
  
        });
</script>
</body></html>
