<!doctype html>
<html lang="en">

<head>
   <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Control Shift is an exciting new arts programme coming to Bristol (UK) in June 2020.">
  <meta name="keywords" content="art, artists, Bristol, data, embodiement, materiality, code">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta property="og:url" content="http://www.control-shift.network">
  <meta property="og:title" content="Control Shift">
  <meta property="og:description" content="Control Shift is an exciting new arts programme coming to Bristol (UK) in June 2020 exploring creative and critical approaches to technology, rooted in embodiment and materiality. Call out open for artworks, workshops and provocations. Deadline 15th March.">
  <meta property="og:image" content="https://www.control-shift.network/img/control-shift-banner.png">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro&display=swap" rel="stylesheet">

  <link rel="stylesheet" type="text/css" href="styles/style.css">

  <title>Control Shift - contact</title>
  <style>
    /* modal styles */
    .is-hidden {
      display: none;
    }

    #overlay {
      border: 1px solid red;
      position: relative;
      min-height: 40px;
      border-radius: 4px;
      padding-right: 30px;
      padding-left: 15px;
      padding-top: 6px;
      padding-bottom: 6px;
      margin-bottom: 4px;
      background-color: red;
      color: white;
      font-size: 0.8em;
    }

    .button-close {
      display: inline-block;
      width: 16px;
      height: 16px;
      position: absolute;
      top: 10px;
      right: 10px;
      cursor: pointer;
      background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAAsTAAALEwEAmpwYAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAABlUlEQVQ4Ea2VTWoCQRCFe5JJxkhECIRAruBJssomGMhpPIK4EzyBJ3LvQnHjYhBHBCfv67ySrJMZKLuon9f112VKKZXz+byvM3/L5fJRTCW6E92KbkSFCR4Zusq2YlMyRhlMOhwOb3Vdf1g51NkT3YtKEUAQPLKeALBJ+OALfw0MQdu2zUXffr9/R7lYLJ50EHlEm6NCZl3CFh98A1T6n1usaHUed7tdjnQ2mz2PRiNK8ADBI8MHG2wFhs8lsktRB98WBs1msxnLr5hOpy86SW9ovkAnjMZgx8gqsKqoh28Nw9N2u/0UUDmZTF4heGQCOxmsiWyMQXlyx3pRF99+dViv11+yGUDwvyI7OYuoN02kznkM6Fzf9SkcRUR6Xq1WY0hg54jM0Rf2oXlgMFLXcagouutUOpoAqAVWG+zsqEts3TRSjfHKQ8uMES7dHLpeA0eVgQxWI5PNwDY0Cx98wSj46fyLF9BZyhSy06aQf6dj0+1gx3Pp8unlFaQ5Y2v8fzkwM52ur1iKgMYK8kP/84Lt9C/gG/ADdWnOKsm1AAAAAElFTkSuQmCC');
    }

    /* modal styles */
  </style>


</head>

<body>
  <div class="container">
    <!-- all content goes in the container -->


    <!-- nav -->
    <nav class="navbar navbar-expand-lg navbar-light" id="menu-mobile">
      <!-- <a class="navbar-brand" href="#">Control Shift</a> -->
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Open the menu">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
          <a class="nav-item nav-link" href="index.html">home</a>
          <a class="nav-item nav-link" href="about.html">about us</a>
          <a class="nav-item nav-link" href="call/index.html">open call</a>
          <a class="nav-item nav-link disabled active" href="#">contact</a>
        </div>
      </div>
    </nav>
    <!-- nav -->

    <!-- row  -->
    <div class="row">
      <div class="col-sm">
        <h1>Contact us / Subscribe</h1>

        <p>If you have any questions about the Control Shift Call please contact us through this form. </p>
        <p>Or if you would like to become part of the Control Shift community subscribe to our email list below</p>


        <div class="form-area d-flex justify-content-center">
          <form role="form" name="contactForm" id="contactForm">
          <!-- <form role="form" action="https://network.us4.list-manage.com/subscribe/post?u=e432b14e44ea9b04c5ab8633e&amp;id=91154fa16e" method="get" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate> -->

            <br style="clear:both">
            <div class="form-group">
              <input type="text" value="" name="FNAME" class="form-control mc" id="mce-FNAME" placeholder="First Name" required><input type="text" value="" name="LNAME" class="form-control mc" id="mce-LNAME" placeholder="Last Name" required>
              <!-- <input type="text" name="inputFirstName" class="form-control" id="inputFirstName" placeholder="First Name" required> -->
            </div>

            <div class="form-group">
              
              <!-- <input id="inputLastName" type="text" name="inputLastName" class="form-control" placeholder="Last Name" required> -->
            </div>

            <div class="form-group">
              <input type="email" value="" name="EMAIL" class="form-control required email mc" id="mce-EMAIL" placeholder="Email" required>
              <!-- <input id="inputEmail" type="text" name="inputEmail" class="form-control" placeholder="Email" required> -->
            </div>

            <div class="form-group">
              <textarea id="inputMsg" type="textarea" name="inputMsg" class="form-control" placeholder="Optional Message" maxlength="140" rows="7"></textarea>
            </div>

            <div class="form-check">
              <input type="checkbox" class="form-check-input" id="SubscribeCheckBox">
              <label class="form-check-label" for="SubscribeCheckBox">Subscribe to the Control Shift mail list</label>
            </div>

            <div class="overlay is-hidden" id="overlay">
              <span class="" id="sendStatus">hello</span><span class="button-close" onclick="closeModal();"></span>
            </div>

            <div class="send-submit">
              <a href="#/"  id="sendMsg">Send</a>
            </div>
            
          </form>
        </div>
        <p></p>
      </div>

    </div>
  </div>

  <!-- Footer -->
  <footer class="page-footer font-small teal pt-4">

    <!-- Footer Text -->
    <div class="container-fluid text-center text-md-left">

      <!-- Grid row -->
      <div class="row logos">
        <div class="col-md-12 mt-md-0 mt-3">
          <h5 class="footer-text">funded by</h5>
        </div>
      </div>
      <!-- Grid row -->

      <!-- Grid row -->
      <div class="row logos">
        <div class="col-sm "></div>
        <div class="col-sm text-center"><img src="logos/lottery_Logo.png" alt="Arts Council England logo" class="img-fluid"></div>
        <div class="col-sm text-center"><img src="logos/ioc.png" alt="Institute of code logo" class="img-fluid"></div>
        <div class="col-sm text-center"><img src="logos/KWMC-2014.png" alt="Knowle west Media Centre logo" class="img-fluid"></div>
        <div class="col-sm text-center"><img src="logos/uwe.png" alt="University of the west England logo" class="img-fluid"></div>
        <div class="col-sm"></div>
      </div>
      <!-- Grid row -->

      <!-- Grid row -->
      <div class="row logos">
        <div class="col-md-12 mt-md-0 mt-3">
          <h5 class="footer-text">supported by</h5>
        </div>
      </div>
      <!-- Grid row -->

      <!-- Grid row -->
      <div class="row logos">
        <div class="col-sm "></div>
        <div class="col-sm text-center"><img src="logos/PCD.png" alt="processing community day logo" class="img-fluid"></div>
        <div class="col-sm text-center"><img src="logos/watershed.png" alt="watershed logo" class="img-fluid"></div>
        <div class="col-sm text-center"><img src="logos/pmstudio.png" alt="bristol city council logo" class="img-fluid"></div>
        <div class="col-sm text-center"><img src="logos/curious.png" alt="we the cuious logo" class="img-fluid"></div>
        <div class="col-sm text-center"><img src="logos/BCC-logo.png" alt="bristol city council logo" class="img-fluid"></div>
        <div class="col-sm"></div>
      </div>
      <!-- Grid row -->

    </div>

    <!-- Footer Text -->

  </footer>
  <!-- Footer -->

  <script>
    //modal scripts
    var overlay = document.getElementById('overlay');

    function openModal() {
      overlay.classList.remove("is-hidden");
    }

    function closeModal() {
      overlay.classList.add("is-hidden");
    }
  </script>

  <script>
    document.getElementById('sendMsg').addEventListener('click', function(){
      //check email
      if (validateEmail() == false) {
        return false;
      };
      //check for msg OR subscribe 
      if (validateSubscribeChecked() || validateMsg()) {
        if (validateSubscribeChecked()) {
          subscribeMe();
        };
        if (validateMsg()) {
          sendValues(getFormValues(),validateEmail(),validateMsg());
        };   
      }
      else {
        document.getElementById("sendStatus").innerHTML = "Please add a message or subscribe to the mail list";
        openModal();
      };
    });

    //SEND FORM VALUES VIA AJAX
    function sendValues(str, emailValidation, msgValidation) {
      if (msgValidation && emailValidation) {
        document.getElementById("sendStatus").innerHTML = "Sending...Please wait for confirmation";
        openModal();
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
          if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById("sendStatus").innerHTML = xmlhttp.responseText;
            document.getElementById("overlay").style.backgroundColor = "green";
            document.getElementById("overlay").style.borderColor = "green";
          }
        };
        console.log(str);
        //xmlhttp.open("POST", "../control-shift-network-server/sendMail.php", true);
        xmlhttp.open("POST", "https://www.irational.org/rodd/control-shift/sendMail.php", true);
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlhttp.send("inputFromForm=" + str);
      } else { //not validated
        document.getElementById("sendStatus").innerHTML = "Sorry your mail could not be sent"; //err msg
        return;
      }
    }

    //GET THE VALUE OF EACH FORM
    function getFormValues() {
      var name = document.getElementById("mce-FNAME").value + " " + document.getElementById("mce-LNAME").value;
      var email = document.getElementById("mce-EMAIL").value;
      var msg = document.getElementById("inputMsg").value;
      var values = name + "\n\n" + email + "\n\n" + msg;
      return values;
    }

    //MSG CHANGED
    var textInput = document.getElementById('inputMsg');

    textInput.addEventListener('keydown', function(){
      console.log(textInput.value);
      if (textInput.value == "") {
        console.log('empty');
      };
      if (document.getElementById('SubscribeCheckBox').checked && textInput.value == "") {
        document.getElementById('sendMsg').innerHTML = "Subscribe";
      } else if(document.getElementById('SubscribeCheckBox').checked == false && textInput.value == ""){
        document.getElementById('sendMsg').innerHTML = "Send";
      } else if(document.getElementById('SubscribeCheckBox').checked){
        document.getElementById('sendMsg').innerHTML = "Send message and Subscribe";
      } else {
        document.getElementById('sendMsg').innerHTML = "Send message";
      };
    });


    //CHECKBOX TICKED
    var checkbox = document.getElementById('SubscribeCheckBox');

    checkbox.addEventListener('change', (event) => {
      if (event.target.checked && textInput.value != "") {
        document.getElementById('sendMsg').innerHTML = "Send message and Subscribe";
      }
      else if (event.target.checked) {
        document.getElementById('sendMsg').innerHTML = "Subscribe"
      }
      else if (textInput.value != "") {
        document.getElementById('sendMsg').innerHTML = "Send message";
      }
      else {
        document.getElementById('sendMsg').innerHTML = "Send";
      };
    })

    //SUBSCRIBE TO MAILCHIMP
    function subscribeMe(){
      var options = $('form[name=contactForm]').find('input, email, textarea, select').filter('.mc').serialize();
      console.log(options);

      $.ajax({
        type: "GET", 
        url: "https://irational.org/rodd/control-shift/sendSub.php", 
        //url: "../control-shift-network-server/sendSub.php", 
        data: options,
        cache: false,
        dataType: 'json',
        //contentType: "application/json; charset=utf-8",
        success: function(data){
          console.log(data);
          var data = JSON.parse(data);
          if (data.title == 'Member Exists') {
            document.getElementById("sendStatus").innerHTML = "You are already subscribed to the mail list";
            openModal();
          }
          else {
            document.getElementById("sendStatus").innerHTML = "Thank you, You are now subscribed to our mail list";
            document.getElementById("overlay").style.backgroundColor = "green";
            document.getElementById("overlay").style.borderColor = "green";
            openModal();
          };
        },
        error: function(data){
          document.getElementById("sendStatus").innerHTML = "Sorry something went wrong and we can't subscribe you to the mail list";
          openModal();
          console.log("error: " + JSON.stringify(data) );
        }
      });
    }


    //CHECK FOR VALID EMAIL
    function validateEmail() {
      var x = document.forms["contactForm"]["EMAIL"].value;
      var atpos = x.indexOf("@");
      var dotpos = x.lastIndexOf(".");
      if (atpos < 1 || dotpos < atpos + 2 || dotpos + 2 >= x.length) {
        document.getElementById("sendStatus").innerHTML = "Sorry, please add a valid e-mail address";
        openModal();
        return false;
      } else {
        return true;
      }
    }

    //CHECK FOR MSG CONTENT
    function validateMsg() {
      if (document.forms["contactForm"]["inputMsg"].value != "") {
        return true;
      } else {
        return false;
      }
    }

    //CHECK FOR SUBSCRIBE CHECKED 
    function validateSubscribeChecked() {
      if (document.getElementById('SubscribeCheckBox').checked) {
        return true;
      } else {
        return false;
      }
    }
  </script>


  <!-- JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>

</html>
